{"version":3,"sources":["components/NewTodo/index.tsx","components/TodoItem/index.tsx","components/TodoList/index.tsx","components/Comments/index.tsx","components/App/index.tsx","index.tsx"],"names":["NewTodo","addTodo","useState","value","setValue","todo","id","active","comments","className","onSubmit","e","preventDefault","Math","floor","random","required","onChange","target","placeholder","TodoItem","activeId","deleteItem","handleActiveItem","cn","onClick","length","TodoList","todos","map","key","Comments","activeTodo","newComment","valueComment","setValueComment","color","setColor","onKeypress","useCallback","code","ctrlKey","useEffect","document","addEventListener","removeEventListener","disabled","type","App","setTodos","setActiveTodo","storageTodo","storageActiveTodo","localStorage","getItem","JSON","parse","setItem","stringify","find","findTodo","filter","todoWithComment","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f5260542.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport './NewTodo.scss'\r\n\r\ntype Props = {\r\n  addTodo: (todo:Todo)=>void\r\n}\r\n\r\nconst NewTodo = ({addTodo}: Props) => {\r\n  const [value, setValue] = useState('');\r\n  const todo = {\r\n   id: '',\r\n   active: false,\r\n   value: '',\r\n   comments: [], \r\n  };\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setValue(e.target.value);\r\n  }\r\n\r\n  const handleSubmitNewTodo = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    addTodo({...todo, value: value, id: Math.floor(Math.random() * 1000000000)});\r\n    setValue('');\r\n  }\r\n\r\n  return(\r\n    <form className=\"form-add-item\" onSubmit={handleSubmitNewTodo}>\r\n      <input\r\n        required\r\n        value={value}\r\n        onChange={handleInputChange}\r\n        className=\"form-input new-todo\"\r\n        placeholder=\"Type name here...\"\r\n      />\r\n      <button className=\"btn btn-primary\">Add New</button>\r\n  </form>\r\n  )\r\n}\r\nexport default NewTodo;","import React from 'react';\r\nimport cn from 'classnames';\r\nimport './TodoItem.scss';\r\n\r\n\r\ntype Props = {\r\n  id: number, \r\n  value:string, \r\n  activeId: number | undefined,\r\n  comments: CommentItem[],\r\n  deleteItem: (id:number)=> void, \r\n  handleActiveItem: (id:number) => void\r\n}\r\n\r\nconst TodoItem = ({id, value, comments, activeId, deleteItem, handleActiveItem}:Props) => {\r\n\r\n  return (\r\n    <div className={cn('todo-item', {'active': activeId === id})} >\r\n      <div className=\"todo-input-value\"  onClick={() =>handleActiveItem(id)}>{value}</div> \r\n      <div className=\"todo-item-info\">\r\n        <span className=\"count-comments\">{comments.length}</span>\r\n        <span className=\"btn btn-danger\" onClick={() => deleteItem(id)}>Delete</span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TodoItem;","import React from 'react';\r\nimport TodoItem from '../TodoItem'\r\n\r\ntype Props = {\r\n  todos: Todo[],\r\n  deleteItem: (id:number)=> void, \r\n  handleActiveItem: (id:number) => void,\r\n  activeId: number | undefined,\r\n}\r\n\r\nconst TodoList = ({todos, deleteItem, activeId, handleActiveItem}:Props) => {\r\n  return (\r\n    <>\r\n    {todos.map((todo)=>(\r\n        <TodoItem activeId={activeId} handleActiveItem={handleActiveItem}  deleteItem={deleteItem} key={todo.id} {...todo}/>\r\n      ))}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default TodoList;","import React, { useState, useEffect, useCallback } from 'react';\r\nimport './Comments.scss'\r\n\r\ntype Props = {\r\n  activeTodo: Todo | null,\r\n  newComment: (color:string, valueComment:string)=> void\r\n}\r\n\r\n const Comments = ({activeTodo, newComment}:Props) => {\r\n   let id: number = 0;  \r\n   let comments: CommentItem[] = []; \r\n   if (activeTodo) {\r\n     id = activeTodo.id;\r\n     comments = activeTodo.comments;\r\n   }\r\n\r\n   const [valueComment, setValueComment] = useState('');\r\n   const [color, setColor] = useState('#000');\r\n    const onKeypress = useCallback((e) => {\r\n      if (e.code === 'Enter' && e.ctrlKey) {\r\n        newComment(color, valueComment);\r\n        setValueComment(\"\");\r\n        setColor('#000');\r\n      }\r\n    }, [color, valueComment, newComment]);\r\n    useEffect(() => {\r\n      document.addEventListener('keypress', onKeypress);\r\n      return () => {\r\n        document.removeEventListener('keypress', onKeypress);\r\n      };\r\n    }, [onKeypress]);\r\n\r\n  const handleValueComment = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setValueComment(e.target.value);\r\n\r\n  }\r\n  const handleChangeColor = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setColor(e.target.value);\r\n  }\r\n  const handleNewComment = (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    newComment(color, valueComment);\r\n    setValueComment('');\r\n    setColor('#000');\r\n  }\r\n\r\n  return (\r\n    <div className=\"block\">\r\n      <h4 className=\"block-title\">Comments #{id} </h4>\r\n      {comments.map(({color, valueComment}:CommentItem) => (\r\n          <div key={color+valueComment} className=\"comments-item\">\r\n            <input disabled className=\"color\" type=\"color\" value={color}/>\r\n            <span className=\"comment-value\">{valueComment}</span>\r\n          </div>\r\n      ))}\r\n\r\n      <form className=\"form-add-comment\" onSubmit={handleNewComment}>\r\n        <input className=\"color\" value={color} onChange={handleChangeColor} type=\"color\"/>\r\n        <input className=\"color-text\" required value={valueComment} onChange={handleValueComment} type=\"text\"/>\r\n        <button className=\"btn btn-primary\">Add new</button> \r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Comments;","import React, { useState, useEffect } from 'react';\nimport NewTodo from '../NewTodo';\nimport TodoList from '../TodoList';\nimport Comments from '../Comments';\n\nimport './App.scss'\n\n\nconst LOCAL_STORAGE_TODO = 'todo-list';\nconst LOCAL_STORAGE_ACTIVE_TODO = 'active-todo';\n const App = () => {\n  const [todos, setTodos] = useState<Todo[]>([]); \n  const [activeTodo, setActiveTodo] = useState<Todo | null>(null);\n\n  useEffect(()=> {\n    let storageTodo;\n    let storageActiveTodo;\n    if (localStorage.getItem(LOCAL_STORAGE_TODO)) {\n      storageTodo = JSON.parse(localStorage.getItem(LOCAL_STORAGE_TODO) || '');\n    }\n    if (localStorage.getItem(LOCAL_STORAGE_ACTIVE_TODO)) {\n      storageActiveTodo = JSON.parse(localStorage.getItem(LOCAL_STORAGE_ACTIVE_TODO) || '');\n    }\n    \n    if (storageTodo){\n      setTodos(storageTodo);\n      setActiveTodo(storageActiveTodo);\n    }\n  }, []);\n\n  useEffect(()=> {\n    localStorage.setItem(LOCAL_STORAGE_TODO, JSON.stringify(todos));\n    localStorage.setItem(LOCAL_STORAGE_ACTIVE_TODO, JSON.stringify(activeTodo));\n    if (todos.length && !todos.find(todo=> todo.id === activeTodo?.id)) {\n      setActiveTodo(todos[todos.length - 1]);\n    }\n  }, [todos, activeTodo]);\n\n\n  \n  const addTodo = (todo:Todo) => {\n    setTodos([...todos, todo]);\n  }\n\n  const deleteItem = (id:number) => {\n    setTodos(\n      todos.filter((todo:Todo) => todo.id !== id)\n    )\n  }\n\n  const handleActiveItem = (id:number)=> {\n    const findTodo = todos.find(todo => todo.id === id) || todos[todos.length - 1];\n    setActiveTodo(findTodo);\n  }\n  \n  const newComment = (color:string, valueComment:string) => {\n    const todoWithComment = todos.map(todo => {\n      if(todo.id === activeTodo?.id){\n        const activeTodo: Todo = {\n          ...todo,\n          comments: [...todo.comments, {color:color, valueComment: valueComment} ]\n        } \n        setActiveTodo(activeTodo);\n        \n        return activeTodo\n      }\n      return todo\n    })\n    setTodos(todoWithComment);\n  }\n\n  return (\n    <div className=\"container-app\">\n      <div className=\"block todo-app\">\n        <h4 className=\"block-title\">Items</h4> \n        <NewTodo addTodo={addTodo}/>\n        <TodoList activeId={activeTodo?.id} handleActiveItem={handleActiveItem} deleteItem={deleteItem} todos={todos}/> \n      </div>\n      <Comments newComment={newComment} activeTodo={activeTodo} />\n    </div>\n  )\n}\n\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}